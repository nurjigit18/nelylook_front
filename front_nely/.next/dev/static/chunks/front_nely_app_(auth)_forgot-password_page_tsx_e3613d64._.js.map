{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/app/%28auth%29/forgot-password/page.tsx"],"sourcesContent":["'use client';\r\n\r\nimport { useState } from 'react';\r\nimport Link from 'next/link';\r\nimport Image from 'next/image';\r\n\r\ntype ApiError = { detail?: string; error?: string } | Record<string, string[] | string>;\r\n\r\nfunction humanizeErrors(data: ApiError | null): string {\r\n  if (!data) return 'Ошибка. Попробуйте позже.';\r\n  if (typeof (data as any).detail === 'string') return (data as any).detail;\r\n  if (typeof (data as any).error === 'string') return (data as any).error;\r\n  const lines: string[] = [];\r\n  for (const [k, v] of Object.entries(data)) {\r\n    if (k === 'status' || k === 'message') continue;\r\n    const msg = Array.isArray(v) ? v.join(', ') : v;\r\n    lines.push(`${k}: ${msg}`);\r\n  }\r\n  return lines.join('\\n') || 'Ошибка. Попробуйте позже.';\r\n}\r\n\r\nexport default function ForgotPasswordPage() {\r\n  const [email, setEmail] = useState('');\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [sent, setSent] = useState(false);\r\n\r\n  const onSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    setSubmitting(true);\r\n    \r\n    try {\r\n      const res = await fetch('/api/auth/request-password-reset', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ email }),\r\n      });\r\n\r\n      const data = await res.json().catch(() => null);\r\n\r\n      if (!res.ok) {\r\n        throw new Error(humanizeErrors(data));\r\n      }\r\n      \r\n      setSent(true);\r\n    } catch (err: any) {\r\n      setError(err.message || 'Не удалось отправить ссылку.');\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <main className=\"min-h-dvh\">\r\n      <div className=\"mx-[calc(50%-50vw)] w-screen\">\r\n        <section className=\"w-full\">\r\n          <div className=\"grid grid-cols-1 md:grid-cols-1 items-stretch min-h-[80dvh]\">\r\n            {/* Left: photo */}\r\n            {/* Right: form or success */}\r\n            <div className=\"w-full flex items-center justify-center px-6 md:px-12 lg:px-20 py-8 md:py-14\">\r\n              <div className=\"w-full max-w-[480px]\">\r\n                {!sent ? (\r\n                  <>\r\n                    <h1 className=\"text-2xl md:text-3xl font-semibold\">\r\n                      Восстановить пароль\r\n                    </h1>\r\n\r\n                    <p className=\"mt-2 text-sm text-neutral-600\">\r\n                      Введите ваш e-mail и мы отправим ссылку для восстановления пароля\r\n                    </p>\r\n\r\n                    <form onSubmit={onSubmit} className=\"mt-6 space-y-4\">\r\n                      <div>\r\n                        <label htmlFor=\"email\" className=\"mb-1 block text-sm font-medium\">\r\n                          Email\r\n                        </label>\r\n                        <input\r\n                          id=\"email\"\r\n                          type=\"email\"\r\n                          autoComplete=\"email\"\r\n                          inputMode=\"email\"\r\n                          required\r\n                          value={email}\r\n                          onChange={(e) => setEmail(e.target.value)}\r\n                          className=\"w-full rounded-lg border px-3 py-2 outline-none focus:ring-2 focus:ring-black/70\"\r\n                          placeholder=\"Введите ваш e-mail\"\r\n                        />\r\n                      </div>\r\n\r\n                      {error && (\r\n                        <p className=\"text-sm text-red-600 whitespace-pre-line\">\r\n                          {error}\r\n                        </p>\r\n                      )}\r\n\r\n                      <button\r\n                        type=\"submit\"\r\n                        disabled={submitting}\r\n                        className=\"w-full rounded-lg bg-black py-2 text-white disabled:opacity-60\"\r\n                      >\r\n                        {submitting ? 'Отправляем…' : 'Отправить ссылку'}\r\n                      </button>\r\n                    </form>\r\n\r\n                    <div className=\"mt-6\">\r\n                      <Link\r\n                        href=\"/login\"\r\n                        className=\"inline-flex items-center gap-2 text-sm text-neutral-600 hover:text-black\"\r\n                      >\r\n                        <span aria-hidden>←</span> Назад ко входу\r\n                      </Link>\r\n                    </div>\r\n                  </>\r\n                ) : (\r\n                  <div className=\"text-center space-y-6\">\r\n                    {/* Success Icon */}\r\n                    <div className=\"mx-auto w-16 h-16 bg-green-100 rounded-full flex items-center justify-center\">\r\n                      <svg className=\"w-8 h-8 text-green-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z\" />\r\n                      </svg>\r\n                    </div>\r\n\r\n                    <div>\r\n                      <h2 className=\"text-2xl font-semibold\">Письмо отправлено!</h2>\r\n                      <p className=\"mt-2 text-sm text-neutral-600\">\r\n                        Мы отправили ссылку для восстановления пароля на <br />\r\n                        <span className=\"font-medium\">{email}</span>\r\n                      </p>\r\n                    </div>\r\n\r\n                    <div className=\"space-y-3\">\r\n                      <Link\r\n                        href=\"/login\"\r\n                        className=\"block w-full rounded-lg bg-black py-2 text-white hover:bg-neutral-800 transition-colors\"\r\n                      >\r\n                        Перейти ко входу\r\n                      </Link>\r\n                      <button\r\n                        onClick={() => {\r\n                          setSent(false);\r\n                          setEmail('');\r\n                          setError(null);\r\n                        }}\r\n                        className=\"w-full rounded-lg border py-2 hover:bg-neutral-50 transition-colors\"\r\n                      >\r\n                        Отправить заново\r\n                      </button>\r\n                    </div>\r\n\r\n                    <p className=\"text-xs text-neutral-500\">\r\n                      Не получили письмо? Проверьте папку «Спам» или попробуйте отправить заново\r\n                    </p>\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </section>\r\n      </div>\r\n    </main>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}