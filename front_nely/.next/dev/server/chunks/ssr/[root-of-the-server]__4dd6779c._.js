module.exports = [
"[project]/front_nely/app/favicon.ico.mjs { IMAGE => \"[project]/front_nely/app/favicon.ico (static in ecmascript, tag client)\" } [app-rsc] (structured image object, ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/front_nely/app/favicon.ico.mjs { IMAGE => \"[project]/front_nely/app/favicon.ico (static in ecmascript, tag client)\" } [app-rsc] (structured image object, ecmascript)"));
}),
"[externals]/next/dist/shared/lib/no-fallback-error.external.js [external] (next/dist/shared/lib/no-fallback-error.external.js, cjs)", ((__turbopack_context__, module, exports) => {

const mod = __turbopack_context__.x("next/dist/shared/lib/no-fallback-error.external.js", () => require("next/dist/shared/lib/no-fallback-error.external.js"));

module.exports = mod;
}),
"[project]/front_nely/app/layout.tsx [app-rsc] (ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/front_nely/app/layout.tsx [app-rsc] (ecmascript)"));
}),
"[project]/front_nely/components/ProductDetailPage.tsx [app-rsc] (client reference proxy) <module evaluation>", ((__turbopack_context__) => {
"use strict";

// This file is generated by next-core EcmascriptClientReferenceModule.
__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/front_nely/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server.js [app-rsc] (ecmascript)");
;
const __TURBOPACK__default__export__ = (0, __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call the default export of [project]/front_nely/components/ProductDetailPage.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/front_nely/components/ProductDetailPage.tsx <module evaluation>", "default");
}),
"[project]/front_nely/components/ProductDetailPage.tsx [app-rsc] (client reference proxy)", ((__turbopack_context__) => {
"use strict";

// This file is generated by next-core EcmascriptClientReferenceModule.
__turbopack_context__.s([
    "default",
    ()=>__TURBOPACK__default__export__
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/front_nely/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-server-dom-turbopack-server.js [app-rsc] (ecmascript)");
;
const __TURBOPACK__default__export__ = (0, __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$server$2d$dom$2d$turbopack$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["registerClientReference"])(function() {
    throw new Error("Attempted to call the default export of [project]/front_nely/components/ProductDetailPage.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.");
}, "[project]/front_nely/components/ProductDetailPage.tsx", "default");
}),
"[project]/front_nely/components/ProductDetailPage.tsx [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

var __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$components$2f$ProductDetailPage$2e$tsx__$5b$app$2d$rsc$5d$__$28$client__reference__proxy$29$__$3c$module__evaluation$3e$__ = __turbopack_context__.i("[project]/front_nely/components/ProductDetailPage.tsx [app-rsc] (client reference proxy) <module evaluation>");
var __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$components$2f$ProductDetailPage$2e$tsx__$5b$app$2d$rsc$5d$__$28$client__reference__proxy$29$__ = __turbopack_context__.i("[project]/front_nely/components/ProductDetailPage.tsx [app-rsc] (client reference proxy)");
;
__turbopack_context__.n(__TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$components$2f$ProductDetailPage$2e$tsx__$5b$app$2d$rsc$5d$__$28$client__reference__proxy$29$__);
}),
"[project]/front_nely/app/catalog/products/[slug]/page.tsx [app-rsc] (ecmascript)", ((__turbopack_context__) => {
"use strict";

// app/catalog/products/[slug]/page.tsx
__turbopack_context__.s([
    "default",
    ()=>ProductPage,
    "generateMetadata",
    ()=>generateMetadata
]);
var __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/front_nely/node_modules/next/dist/server/route-modules/app-page/vendored/rsc/react-jsx-dev-runtime.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$node_modules$2f$next$2f$dist$2f$api$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__$3c$locals$3e$__ = __turbopack_context__.i("[project]/front_nely/node_modules/next/dist/api/navigation.react-server.js [app-rsc] (ecmascript) <locals>");
var __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$node_modules$2f$next$2f$dist$2f$client$2f$components$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/front_nely/node_modules/next/dist/client/components/navigation.react-server.js [app-rsc] (ecmascript)");
var __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$components$2f$ProductDetailPage$2e$tsx__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__ = __turbopack_context__.i("[project]/front_nely/components/ProductDetailPage.tsx [app-rsc] (ecmascript)");
;
;
;
async function getProduct(slug) {
    try {
        const BACKEND_URL = process.env.BACKEND_URL || 'http://127.0.0.1:8000';
        console.log('ðŸ” Fetching product with slug:', slug);
        // Try direct product endpoint first with slug lookup
        const directRes = await fetch(`${BACKEND_URL}/catalog/products/?slug=${slug}`, {
            cache: 'no-store',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        console.log('ðŸ“¥ Direct response status:', directRes.status);
        if (directRes.ok) {
            const data = await directRes.json();
            console.log('ðŸ“¦ Direct response data structure:', Object.keys(data));
            // Handle different response formats
            let product = null;
            // Check if data is wrapped in an envelope
            if (data.data) {
                console.log('ðŸ“¦ Data is wrapped in envelope');
                if (Array.isArray(data.data.results)) {
                    product = data.data.results[0];
                } else if (Array.isArray(data.data)) {
                    product = data.data[0];
                } else if (data.data.results) {
                    product = data.data.results;
                } else {
                    product = data.data;
                }
            } else if (data.results && Array.isArray(data.results)) {
                console.log('ðŸ“¦ Data has results array, count:', data.results.length);
                product = data.results[0];
            } else if (data.id) {
                console.log('ðŸ“¦ Data is direct product object');
                product = data;
            }
            if (product) {
                console.log('âœ… Product found:', product.name || product.product_name);
                return product;
            }
        }
        console.log('âŒ Product not found for slug:', slug);
        return null;
    } catch (error) {
        console.error('âŒ Error fetching product:', error);
        return null;
    }
}
async function getRelatedProducts(productId) {
    try {
        const BACKEND_URL = process.env.BACKEND_URL || 'http://127.0.0.1:8000';
        console.log('ðŸ” Fetching related products for product:', productId);
        const res = await fetch(`${BACKEND_URL}/catalog/products/${productId}/related/`, {
            cache: 'no-store',
            headers: {
                'Content-Type': 'application/json'
            }
        });
        if (!res.ok) {
            console.log('âš ï¸ Related products not found or error:', res.status);
            return [];
        }
        const data = await res.json();
        console.log('ðŸ“¦ Related products response:', Object.keys(data));
        // Handle wrapped response
        let products = [];
        if (data.data) {
            products = Array.isArray(data.data) ? data.data : [
                data.data
            ];
        } else if (data.results) {
            products = data.results;
        } else if (Array.isArray(data)) {
            products = data;
        }
        console.log('âœ… Found related products:', products.length);
        return products;
    } catch (error) {
        console.error('âŒ Error fetching related products:', error);
        return [];
    }
}
async function ProductPage({ params, searchParams }) {
    const { slug } = await params;
    const { color: colorParam } = await searchParams;
    console.log('ðŸŽ¯ ProductPage rendering for slug:', slug);
    console.log('ðŸŽ¨ Color parameter:', colorParam);
    const product = await getProduct(slug);
    if (!product) {
        console.log('âŒ Product not found, returning 404');
        (0, __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$node_modules$2f$next$2f$dist$2f$client$2f$components$2f$navigation$2e$react$2d$server$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["notFound"])();
    }
    console.log('âœ… Product loaded:', product.name || product.product_name);
    // Get the product ID (handle both formats)
    const productId = product.id || product.product_id;
    const relatedProducts = await getRelatedProducts(productId);
    // Parse color ID from search params
    const selectedColorId = colorParam ? parseInt(colorParam) : null;
    console.log('ðŸŽ¨ Selected color ID:', selectedColorId);
    // Transform related products to match ProductCard interface
    const transformedRelated = relatedProducts.map((p)=>{
        const productName = p.name || p.product_name;
        const productSlug = p.slug;
        const primaryImage = p.primary_image || p.images?.[0]?.url || p.images?.[0]?.image_url;
        const basePrice = p.base_price || p.price;
        const salePrice = p.sale_price;
        const categoryName = p.category_name || p.category?.category_name;
        return {
            id: p.id || p.product_id,
            href: `/catalog/products/${productSlug}`,
            imageSrc: primaryImage || '/placeholder-product.jpg',
            imageAlt: productName,
            title: productName,
            sizeLabel: categoryName || '',
            priceFormatted: `${salePrice || basePrice} ÑÐ¾Ð¼`,
            compareAtFormatted: salePrice ? `${basePrice} ÑÐ¾Ð¼` : undefined,
            rating: p.rating || 4.5
        };
    });
    // Normalize product data to match ProductDetailPage interface
    const normalizedProduct = {
        id: productId,
        name: product.name || product.product_name,
        slug: product.slug,
        base_price: product.base_price || product.price,
        sale_price: product.sale_price,
        description: product.description,
        short_description: product.short_description,
        available_colors: product.available_colors || [],
        available_sizes: product.available_sizes || [],
        images: product.images || [],
        category_name: product.category_name || product.category?.category_name,
        season_display: product.season_display || product.season,
        is_featured: product.is_featured || false,
        is_new_arrival: product.is_new_arrival || product.is_new || false,
        rating: product.rating || 4.5
    };
    console.log('ðŸŽ¨ Rendering ProductDetailPage with:', {
        name: normalizedProduct.name,
        imagesCount: normalizedProduct.images.length,
        colorsCount: normalizedProduct.available_colors.length,
        sizesCount: normalizedProduct.available_sizes.length,
        relatedCount: transformedRelated.length,
        selectedColorId
    });
    return /*#__PURE__*/ (0, __TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$node_modules$2f$next$2f$dist$2f$server$2f$route$2d$modules$2f$app$2d$page$2f$vendored$2f$rsc$2f$react$2d$jsx$2d$dev$2d$runtime$2e$js__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["jsxDEV"])(__TURBOPACK__imported__module__$5b$project$5d2f$front_nely$2f$components$2f$ProductDetailPage$2e$tsx__$5b$app$2d$rsc$5d$__$28$ecmascript$29$__["default"], {
        product: normalizedProduct,
        relatedProducts: transformedRelated,
        whatsappNumber: "+996700123456",
        initialColorId: selectedColorId
    }, void 0, false, {
        fileName: "[project]/front_nely/app/catalog/products/[slug]/page.tsx",
        lineNumber: 188,
        columnNumber: 5
    }, this);
}
async function generateMetadata({ params }) {
    const { slug } = await params;
    const product = await getProduct(slug);
    if (!product) {
        return {
            title: 'Product Not Found | Nely Look'
        };
    }
    const productName = product.name || product.product_name;
    const description = product.short_description || product.description || '';
    return {
        title: `${productName} | Nely Look`,
        description: description.substring(0, 160),
        openGraph: {
            title: productName,
            description: description,
            images: product.images?.[0]?.url || product.images?.[0]?.image_url ? [
                {
                    url: product.images[0].url || product.images[0].image_url,
                    alt: productName
                }
            ] : []
        }
    };
}
}),
"[project]/front_nely/app/catalog/products/[slug]/page.tsx [app-rsc] (ecmascript, Next.js Server Component)", ((__turbopack_context__) => {

__turbopack_context__.n(__turbopack_context__.i("[project]/front_nely/app/catalog/products/[slug]/page.tsx [app-rsc] (ecmascript)"));
}),
];

//# sourceMappingURL=%5Broot-of-the-server%5D__4dd6779c._.js.map