{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/components/ProductDetailPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/front_nely/components/ProductDetailPage.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/front_nely/components/ProductDetailPage.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,sRAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+S,GAC5U,6EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/components/ProductDetailPage.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/front_nely/components/ProductDetailPage.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/front_nely/components/ProductDetailPage.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,sRAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2R,GACxT,yDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/app/catalog/products/%5Bslug%5D/page.tsx"],"sourcesContent":["// app/catalog/products/[slug]/page.tsx\r\nimport { notFound } from 'next/navigation';\r\nimport ProductDetailPage from '@/components/ProductDetailPage';\r\n\r\ntype Props = {\r\n  params: Promise<{ slug: string }>;\r\n};\r\n\r\nasync function getProduct(slug: string) {\r\n  try {\r\n    const BACKEND_URL = process.env.BACKEND_URL || 'http://127.0.0.1:8000';\r\n    \r\n    console.log('üîç Fetching product with slug:', slug);\r\n    \r\n    // Try direct product endpoint first with slug lookup\r\n    const directRes = await fetch(`${BACKEND_URL}/catalog/products/?slug=${slug}`, {\r\n      cache: 'no-store',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n    \r\n    console.log('üì• Direct response status:', directRes.status);\r\n    \r\n    if (directRes.ok) {\r\n      const data = await directRes.json();\r\n      console.log('üì¶ Direct response data structure:', Object.keys(data));\r\n      \r\n      // Handle different response formats\r\n      let product = null;\r\n      \r\n      // Check if data is wrapped in an envelope\r\n      if (data.data) {\r\n        console.log('üì¶ Data is wrapped in envelope');\r\n        if (Array.isArray(data.data.results)) {\r\n          product = data.data.results[0];\r\n        } else if (Array.isArray(data.data)) {\r\n          product = data.data[0];\r\n        } else if (data.data.results) {\r\n          product = data.data.results;\r\n        } else {\r\n          product = data.data;\r\n        }\r\n      } \r\n      // Check if data has results array (paginated)\r\n      else if (data.results && Array.isArray(data.results)) {\r\n        console.log('üì¶ Data has results array, count:', data.results.length);\r\n        product = data.results[0];\r\n      }\r\n      // Direct product object\r\n      else if (data.id) {\r\n        console.log('üì¶ Data is direct product object');\r\n        product = data;\r\n      }\r\n      \r\n      if (product) {\r\n        console.log('‚úÖ Product found:', product.name || product.product_name);\r\n        return product;\r\n      }\r\n    }\r\n    \r\n    console.log('‚ùå Product not found for slug:', slug);\r\n    return null;\r\n    \r\n  } catch (error) {\r\n    console.error('‚ùå Error fetching product:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nasync function getRelatedProducts(productId: number) {\r\n  try {\r\n    const BACKEND_URL = process.env.BACKEND_URL || 'http://127.0.0.1:8000';\r\n    \r\n    console.log('üîç Fetching related products for product:', productId);\r\n    \r\n    const res = await fetch(`${BACKEND_URL}/catalog/products/${productId}/related/`, {\r\n      cache: 'no-store',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n    });\r\n    \r\n    if (!res.ok) {\r\n      console.log('‚ö†Ô∏è Related products not found or error:', res.status);\r\n      return [];\r\n    }\r\n    \r\n    const data = await res.json();\r\n    console.log('üì¶ Related products response:', Object.keys(data));\r\n    \r\n    // Handle wrapped response\r\n    let products = [];\r\n    if (data.data) {\r\n      products = Array.isArray(data.data) ? data.data : [data.data];\r\n    } else if (data.results) {\r\n      products = data.results;\r\n    } else if (Array.isArray(data)) {\r\n      products = data;\r\n    }\r\n    \r\n    console.log('‚úÖ Found related products:', products.length);\r\n    return products;\r\n    \r\n  } catch (error) {\r\n    console.error('‚ùå Error fetching related products:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default async function ProductPage({ params }: Props) {\r\n  const { slug } = await params;\r\n  \r\n  console.log('üéØ ProductPage rendering for slug:', slug);\r\n  \r\n  const product = await getProduct(slug);\r\n  \r\n  if (!product) {\r\n    console.log('‚ùå Product not found, returning 404');\r\n    notFound();\r\n  }\r\n  \r\n  console.log('‚úÖ Product loaded:', product.name || product.product_name);\r\n  \r\n  // Get the product ID (handle both formats)\r\n  const productId = product.id || product.product_id;\r\n  \r\n  const relatedProducts = await getRelatedProducts(productId);\r\n  \r\n  // Transform related products to match ProductCard interface\r\n  const transformedRelated = relatedProducts.map((p: any) => {\r\n    const productName = p.name || p.product_name;\r\n    const productSlug = p.slug;\r\n    const primaryImage = p.primary_image || p.images?.[0]?.url || p.images?.[0]?.image_url;\r\n    const basePrice = p.base_price || p.price;\r\n    const salePrice = p.sale_price;\r\n    const categoryName = p.category_name || p.category?.category_name;\r\n    \r\n    return {\r\n      id: p.id || p.product_id,\r\n      href: `/catalog/products/${productSlug}`,\r\n      imageSrc: primaryImage || '/placeholder-product.jpg',\r\n      imageAlt: productName,\r\n      title: productName,\r\n      sizeLabel: categoryName || '',\r\n      priceFormatted: `${salePrice || basePrice} —Å–æ–º`,\r\n      compareAtFormatted: salePrice ? `${basePrice} —Å–æ–º` : undefined,\r\n      rating: p.rating || 4.5,\r\n    };\r\n  });\r\n  \r\n  // Normalize product data to match ProductDetailPage interface\r\n  const normalizedProduct = {\r\n    id: productId,\r\n    name: product.name || product.product_name,\r\n    slug: product.slug,\r\n    base_price: product.base_price || product.price,\r\n    sale_price: product.sale_price,\r\n    description: product.description,\r\n    short_description: product.short_description,\r\n    available_colors: product.available_colors || [],\r\n    available_sizes: product.available_sizes || [],\r\n    images: product.images || [],\r\n    category_name: product.category_name || product.category?.category_name,\r\n    season_display: product.season_display || product.season,\r\n    is_featured: product.is_featured || false,\r\n    is_new_arrival: product.is_new_arrival || product.is_new || false,\r\n    rating: product.rating || 4.5,\r\n  };\r\n  \r\n  console.log('üé® Rendering ProductDetailPage with:', {\r\n    name: normalizedProduct.name,\r\n    imagesCount: normalizedProduct.images.length,\r\n    colorsCount: normalizedProduct.available_colors.length,\r\n    sizesCount: normalizedProduct.available_sizes.length,\r\n    relatedCount: transformedRelated.length,\r\n  });\r\n  \r\n  return (\r\n    <ProductDetailPage \r\n      product={normalizedProduct}\r\n      relatedProducts={transformedRelated}\r\n      whatsappNumber=\"+996700123456\"\r\n    />\r\n  );\r\n}\r\n\r\n// Generate metadata for SEO\r\nexport async function generateMetadata({ params }: Props) {\r\n  const { slug } = await params;\r\n  const product = await getProduct(slug);\r\n  \r\n  if (!product) {\r\n    return {\r\n      title: 'Product Not Found | Nely Look',\r\n    };\r\n  }\r\n  \r\n  const productName = product.name || product.product_name;\r\n  const description = product.short_description || product.description || '';\r\n  \r\n  return {\r\n    title: `${productName} | Nely Look`,\r\n    description: description.substring(0, 160), // SEO best practice\r\n    openGraph: {\r\n      title: productName,\r\n      description: description,\r\n      images: product.images?.[0]?.url || product.images?.[0]?.image_url \r\n        ? [{\r\n            url: product.images[0].url || product.images[0].image_url,\r\n            alt: productName,\r\n          }]\r\n        : [],\r\n    },\r\n  };\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}