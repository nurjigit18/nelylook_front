{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/components/ProductCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/front_nely/components/ProductCard.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/front_nely/components/ProductCard.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,sRAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyS,GACtU,uEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/components/ProductCard.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/front_nely/components/ProductCard.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/front_nely/components/ProductCard.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,sRAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAqR,GAClT,mDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/app/catalog/%5Bcategory_slug%5D/page.tsx"],"sourcesContent":["// app/catalog/[category_slug]/page.tsx\r\nimport { notFound } from 'next/navigation';\r\nimport ProductCard from '@/components/ProductCard';  // ✅ Add this import\r\nimport Link from 'next/link';\r\n\r\nconst BACKEND_URL = process.env.BACKEND_URL || 'http://127.0.0.1:8000';\r\n\r\ntype Category = {\r\n  id: number;\r\n  name: string;\r\n  slug: string;\r\n  description?: string;\r\n  parent_name?: string;\r\n};\r\n\r\ntype Product = {\r\n  id: number;\r\n  name: string;\r\n  slug: string;\r\n  base_price: string;\r\n  sale_price?: string;\r\n  primary_image?: string;\r\n};\r\n\r\nasync function getCategory(slug: string): Promise<Category | null> {\r\n  try {\r\n    // Fetch all categories and find by slug\r\n    const res = await fetch(`${BACKEND_URL}/catalog/categories/`, {\r\n      cache: 'no-store',\r\n    });\r\n\r\n    if (!res.ok) return null;\r\n\r\n    const data = await res.json();\r\n    const categories = data.data || data;\r\n    \r\n    if (!Array.isArray(categories)) return null;\r\n    \r\n    // Find category by slug\r\n    const category = categories.find((cat: Category) => cat.slug === slug);\r\n    return category || null;\r\n  } catch (error) {\r\n    console.error('Error fetching category:', error);\r\n    return null;\r\n  }\r\n}\r\n\r\nasync function getCategoryProducts(categoryId: number): Promise<Product[]> {\r\n  try {\r\n    const res = await fetch(\r\n      `${BACKEND_URL}/catalog/products/?category=${categoryId}`,\r\n      { cache: 'no-store' }\r\n    );\r\n\r\n    if (!res.ok) return [];\r\n\r\n    const data = await res.json();\r\n    return data.data?.results || data.results || [];\r\n  } catch (error) {\r\n    console.error('Error fetching products:', error);\r\n    return [];\r\n  }\r\n}\r\n\r\nexport default async function CategoryPage({\r\n  params,\r\n}: {\r\n  params: { category_slug: string };\r\n}) {\r\n  const category = await getCategory(params.category_slug);\r\n\r\n  if (!category) {\r\n    notFound();\r\n  }\r\n\r\n  const products = await getCategoryProducts(category.id);\r\n\r\n  return (\r\n    <main className=\"container mx-auto px-4 py-8\">\r\n      {/* Breadcrumb */}\r\n      <nav className=\"mb-6 text-sm text-gray-600\">\r\n        <Link href=\"/\" className=\"hover:text-black\">\r\n          Главная\r\n        </Link>\r\n        <span className=\"mx-2\">/</span>\r\n        <Link href=\"/catalog/products\" className=\"hover:text-black\">\r\n          Каталог\r\n        </Link>\r\n        <span className=\"mx-2\">/</span>\r\n        <span className=\"text-black\">{category.name}</span>\r\n      </nav>\r\n\r\n      {/* Category Header */}\r\n      <div className=\"mb-8\">\r\n        <h1 className=\"text-4xl font-bold mb-2\">{category.name}</h1>\r\n        {category.description && (\r\n          <p className=\"text-gray-600 max-w-3xl\">{category.description}</p>\r\n        )}\r\n        <p className=\"text-sm text-gray-500 mt-2\">\r\n          {products.length} {products.length === 1 ? 'товар' : 'товаров'}\r\n        </p>\r\n      </div>\r\n\r\n      {/* Products Grid */}\r\n      {products.length > 0 ? (\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\r\n          {products.map((product) => {\r\n            const displayPrice = product.sale_price || product.base_price;\r\n            const originalPrice = product.sale_price ? product.base_price : null;\r\n\r\n            return (\r\n              <ProductCard\r\n                key={product.id}\r\n                href={`/catalog/products/${product.slug}`}\r\n                imageSrc={product.primary_image || '/placeholder-product.jpg'}\r\n                imageAlt={product.name}\r\n                title={product.name}\r\n                priceFormatted={`${displayPrice} сом`}\r\n                compareAtFormatted={\r\n                  originalPrice ? `${originalPrice} сом` : undefined\r\n                }\r\n                className=\"w-full\"\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-12\">\r\n          <p className=\"text-gray-500\">В этой категории пока нет товаров</p>\r\n          <Link\r\n            href=\"/catalog/products\"\r\n            className=\"mt-4 inline-block text-sm text-blue-600 hover:text-blue-800 underline\"\r\n          >\r\n            Посмотреть все товары\r\n          </Link>\r\n        </div>\r\n      )}\r\n    </main>\r\n  );\r\n}\r\n\r\n// Generate metadata for SEO\r\nexport async function generateMetadata({\r\n  params,\r\n}: {\r\n  params: { category_slug: string };\r\n}) {\r\n  const category = await getCategory(params.category_slug);\r\n\r\n  if (!category) {\r\n    return {\r\n      title: 'Категория не найдена | NelyLook',\r\n    };\r\n  }\r\n\r\n  return {\r\n    title: `${category.name} | NelyLook`,\r\n    description: category.description || `Купить ${category.name} в NelyLook`,\r\n    openGraph: {\r\n      title: `${category.name} | NelyLook`,\r\n      description: category.description || `Купить ${category.name} в NelyLook`,\r\n    },\r\n  };\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}