{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/app/api/catalog/products/route.ts"],"sourcesContent":["// app/api/catalog/products/route.ts\r\nimport { NextRequest, NextResponse } from 'next/server';\r\n\r\nconst BACKEND_URL = process.env.BACKEND_URL || 'http://127.0.0.1:8000';\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    const searchParams = request.nextUrl.searchParams;\r\n    \r\n    // Build query string for Django backend\r\n    const params = new URLSearchParams();\r\n    \r\n    // Forward all query parameters\r\n    searchParams.forEach((value, key) => {\r\n      params.append(key, value);\r\n    });\r\n    \r\n    console.log('üì° Fetching products from Django:', `${BACKEND_URL}/catalog/products/?${params.toString()}`);\r\n    \r\n    const res = await fetch(`${BACKEND_URL}/catalog/products/?${params.toString()}`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      cache: 'no-store',\r\n    });\r\n\r\n    console.log('üì• Django response status:', res.status);\r\n\r\n    if (!res.ok) {\r\n      const error = await res.json().catch(() => ({ detail: 'Unknown error' }));\r\n      console.error('‚ùå Django error:', error);\r\n      return NextResponse.json(error, { status: res.status });\r\n    }\r\n\r\n    const data = await res.json();\r\n    console.log('‚úÖ Products fetched from Django');\r\n    \r\n    // Your CustomPagination returns:\r\n    // {\r\n    //   status: 'success',\r\n    //   message: 'Paginated results',\r\n    //   data: { count, next, previous, results }\r\n    // }\r\n    // \r\n    // Return the inner 'data' object directly so frontend gets:\r\n    // { count, next, previous, results }\r\n    \r\n    if (data.data) {\r\n      // Wrapped response - extract the data\r\n      return NextResponse.json(data.data);\r\n    }\r\n    \r\n    // Fallback: return as-is if not wrapped\r\n    return NextResponse.json(data);\r\n  } catch (error) {\r\n    console.error('‚ùå Error fetching products:', error);\r\n    return NextResponse.json(\r\n      { detail: 'Failed to fetch products', error: String(error) },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,oCAAoC;;;;;AACpC;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAExC,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,eAAe,QAAQ,OAAO,CAAC,YAAY;QAEjD,wCAAwC;QACxC,MAAM,SAAS,IAAI;QAEnB,+BAA+B;QAC/B,aAAa,OAAO,CAAC,CAAC,OAAO;YAC3B,OAAO,MAAM,CAAC,KAAK;QACrB;QAEA,QAAQ,GAAG,CAAC,qCAAqC,GAAG,YAAY,mBAAmB,EAAE,OAAO,QAAQ,IAAI;QAExG,MAAM,MAAM,MAAM,MAAM,GAAG,YAAY,mBAAmB,EAAE,OAAO,QAAQ,IAAI,EAAE;YAC/E,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,OAAO;QACT;QAEA,QAAQ,GAAG,CAAC,8BAA8B,IAAI,MAAM;QAEpD,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;oBAAE,QAAQ;gBAAgB,CAAC;YACvE,QAAQ,KAAK,CAAC,mBAAmB;YACjC,OAAO,8JAAY,CAAC,IAAI,CAAC,OAAO;gBAAE,QAAQ,IAAI,MAAM;YAAC;QACvD;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,QAAQ,GAAG,CAAC;QAEZ,iCAAiC;QACjC,IAAI;QACJ,uBAAuB;QACvB,kCAAkC;QAClC,6CAA6C;QAC7C,IAAI;QACJ,GAAG;QACH,4DAA4D;QAC5D,qCAAqC;QAErC,IAAI,KAAK,IAAI,EAAE;YACb,sCAAsC;YACtC,OAAO,8JAAY,CAAC,IAAI,CAAC,KAAK,IAAI;QACpC;QAEA,wCAAwC;QACxC,OAAO,8JAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,OAAO,8JAAY,CAAC,IAAI,CACtB;YAAE,QAAQ;YAA4B,OAAO,OAAO;QAAO,GAC3D;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}