{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/app/api/auth/send-verification/route.ts"],"sourcesContent":["// app/api/auth/send-verification/route.ts\r\nimport { NextRequest, NextResponse } from \"next/server\";\r\n\r\nexport async function POST(req: NextRequest) {\r\n  const api = \"http://127.0.0.1:8000\";\r\n  const body = await req.json().catch(() => ({}));\r\n  \r\n  // Get access token from cookie instead of header\r\n  const accessToken = req.cookies.get('access_token')?.value;\r\n  \r\n  if (!accessToken) {\r\n    return NextResponse.json(\r\n      { detail: 'Не авторизован' },\r\n      { status: 401 }\r\n    );\r\n  }\r\n  \r\n  const headers: HeadersInit = {\r\n    \"Content-Type\": \"application/json\",\r\n    \"Authorization\": `Bearer ${accessToken}`\r\n  };\r\n\r\n  try {\r\n    const upstream = await fetch(`${api}/auth/send-verification/`, {\r\n      method: \"POST\",\r\n      headers,\r\n      body: JSON.stringify(body),\r\n    });\r\n\r\n    const data = await upstream.clone().json().catch(() => ({}));\r\n    return NextResponse.json(data, { status: upstream.status });\r\n  } catch (error) {\r\n    return NextResponse.json(\r\n      { detail: \"Ошибка отправки письма\" },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,0CAA0C;;;;;AAC1C;;AAEO,eAAe,KAAK,GAAgB;IACzC,MAAM,MAAM;IACZ,MAAM,OAAO,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;IAE7C,iDAAiD;IACjD,MAAM,cAAc,IAAI,OAAO,CAAC,GAAG,CAAC,iBAAiB;IAErD,IAAI,CAAC,aAAa;QAChB,OAAO,8JAAY,CAAC,IAAI,CACtB;YAAE,QAAQ;QAAiB,GAC3B;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,UAAuB;QAC3B,gBAAgB;QAChB,iBAAiB,CAAC,OAAO,EAAE,aAAa;IAC1C;IAEA,IAAI;QACF,MAAM,WAAW,MAAM,MAAM,GAAG,IAAI,wBAAwB,CAAC,EAAE;YAC7D,QAAQ;YACR;YACA,MAAM,KAAK,SAAS,CAAC;QACvB;QAEA,MAAM,OAAO,MAAM,SAAS,KAAK,GAAG,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC,CAAC,CAAC;QAC1D,OAAO,8JAAY,CAAC,IAAI,CAAC,MAAM;YAAE,QAAQ,SAAS,MAAM;QAAC;IAC3D,EAAE,OAAO,OAAO;QACd,OAAO,8JAAY,CAAC,IAAI,CACtB;YAAE,QAAQ;QAAyB,GACnC;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}