{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/nelylook/front/front_nely/app/api/catalog/products/filters/route.ts"],"sourcesContent":["// app/api/catalog/products/filters/route.ts\r\nimport { NextRequest, NextResponse } from 'next/server';\r\n\r\nconst BACKEND_URL = process.env.BACKEND_URL || 'http://127.0.0.1:8000';\r\n\r\nexport async function GET(request: NextRequest) {\r\n  try {\r\n    console.log('üì° Fetching filters from Django:', `${BACKEND_URL}/catalog/products/filters/`);\r\n    \r\n    const res = await fetch(`${BACKEND_URL}/catalog/products/filters/`, {\r\n      method: 'GET',\r\n      headers: {\r\n        'Content-Type': 'application/json',\r\n      },\r\n      cache: 'no-store',\r\n    });\r\n\r\n    console.log('üì• Django filters response status:', res.status);\r\n\r\n    if (!res.ok) {\r\n      const error = await res.json().catch(() => ({ detail: 'Unknown error' }));\r\n      console.error('‚ùå Django filters error:', error);\r\n      return NextResponse.json(error, { status: res.status });\r\n    }\r\n\r\n    const data = await res.json();\r\n    console.log('‚úÖ Filters fetched from Django');\r\n    \r\n    // Your APIResponse.success() returns:\r\n    // {\r\n    //   status: 'success',\r\n    //   message: 'Available filter options',\r\n    //   data: { price_range, categories, colors, sizes, seasons }\r\n    // }\r\n    // \r\n    // Return the inner 'data' object directly\r\n    \r\n    if (data.data) {\r\n      // Wrapped response - extract the data\r\n      return NextResponse.json(data.data);\r\n    }\r\n    \r\n    // Fallback: return as-is if not wrapped\r\n    return NextResponse.json(data);\r\n  } catch (error) {\r\n    console.error('‚ùå Error fetching filters:', error);\r\n    return NextResponse.json(\r\n      { detail: 'Failed to fetch filters', error: String(error) },\r\n      { status: 500 }\r\n    );\r\n  }\r\n}"],"names":[],"mappings":"AAAA,4CAA4C;;;;;AAC5C;;AAEA,MAAM,cAAc,QAAQ,GAAG,CAAC,WAAW,IAAI;AAExC,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,QAAQ,GAAG,CAAC,oCAAoC,GAAG,YAAY,0BAA0B,CAAC;QAE1F,MAAM,MAAM,MAAM,MAAM,GAAG,YAAY,0BAA0B,CAAC,EAAE;YAClE,QAAQ;YACR,SAAS;gBACP,gBAAgB;YAClB;YACA,OAAO;QACT;QAEA,QAAQ,GAAG,CAAC,sCAAsC,IAAI,MAAM;QAE5D,IAAI,CAAC,IAAI,EAAE,EAAE;YACX,MAAM,QAAQ,MAAM,IAAI,IAAI,GAAG,KAAK,CAAC,IAAM,CAAC;oBAAE,QAAQ;gBAAgB,CAAC;YACvE,QAAQ,KAAK,CAAC,2BAA2B;YACzC,OAAO,8JAAY,CAAC,IAAI,CAAC,OAAO;gBAAE,QAAQ,IAAI,MAAM;YAAC;QACvD;QAEA,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,QAAQ,GAAG,CAAC;QAEZ,sCAAsC;QACtC,IAAI;QACJ,uBAAuB;QACvB,yCAAyC;QACzC,8DAA8D;QAC9D,IAAI;QACJ,GAAG;QACH,0CAA0C;QAE1C,IAAI,KAAK,IAAI,EAAE;YACb,sCAAsC;YACtC,OAAO,8JAAY,CAAC,IAAI,CAAC,KAAK,IAAI;QACpC;QAEA,wCAAwC;QACxC,OAAO,8JAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,8JAAY,CAAC,IAAI,CACtB;YAAE,QAAQ;YAA2B,OAAO,OAAO;QAAO,GAC1D;YAAE,QAAQ;QAAI;IAElB;AACF","debugId":null}}]
}